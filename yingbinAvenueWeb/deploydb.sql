DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'yingbinAvenueWeb.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201904130100149_initdb'
BEGIN
    CREATE TABLE [dbo].[EntryForms] (
        [Id] [int] NOT NULL IDENTITY,
        [UserName] [nvarchar](20),
        [MobiPhone] [nvarchar](15),
        CONSTRAINT [PK_dbo.EntryForms] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [IX_MobiPhone] ON [dbo].[EntryForms]([MobiPhone])
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201904130100149_initdb', N'yingbinAvenueWeb.Migrations.Configuration',  0x1F8B0800000000000400CD57CD8EDB3610BE17E83B103A6FCCB517055A434AB0B1E3C268BCBB88360972A4A4B14D94221592326C147DB21EFA487D850EAD5F4B6B7BBD0882C0179B9AF966E6E3CC7CF27FFFFCEBBFD9A6826C401BAE64E00D07D71E0119AB84CB55E0E576F9EA57EFCDEB9F7FF2DF25E9967CAAEC6E9C1D7A4A13786B6BB331A5265E43CACC20E5B156462DED2056296589A2A3EBEBDFE8704801213CC422C4FF904BCB53D8FFC09F132563C86CCEC44225204C798E4FC23D2AB96329988CC510783BCC2CE2F276033287CF100D0A178FDC0ACE309D10C4D2234C4A6599C564C71F0D84562BB90A333C60E2719701DA2D99305016316ECC9F5BCFF5C8D5431BC70A2ACE8D55E98580C39B9220DA757F11CD5E4D2052F80EA9B63B57F59EC6C0C303BD9B299D7AA41B6D3C11DA591EA579503B5F91AEC955DD1FD846EE734526B9B0B98640426E351357E4218F048FFF80DDA3FA1364207321DAC962BAF8ECE0008F1EB4CA40DBDD07589625CC138FD0433FDA75ACDD5A3E456D73696F461EB9C3E02C1250F7428B87D02A0DBF8304CD2C240FCC5AD0D261C09ECD5EF44E2CEC39EDBE5511B101912C8F2CD8F63DC8955D07DE082768C6B790540765121F25C7F1431FAB73381767A122FEB056F254A0E12F1707F269D334FD56C269B58C233565125FA2A205A6917B025BFB445F2121656B9932E0615D057208B6DBA338D84D2EC5740F5A0DFC54D6757ECD1AA1C51EA9F60D3DB270FC05CB32E4AFB580CA131216DB67F22ABC7C22D30283C6E689C1ACB3AD2361EBB115749E6268CC74C6B5B1536659C4DC154E92B467D6BF8D234C57F17A8477C7AFE1BF7271DF0BB7B36BA28BD6503AC32A531CA77DC150A7D5DE4F3DDFBD2230C1F413B33D51224FE5B1FD70CABB99D6364673FA7CA4D63CB6A15AC77D2C9F7608E9F24F7B17D0D97CDD2B3D35135D933A7A3D1B9D19F0CB7E3CAFCCBD062D4C3C82246D78E29A33DC190BE9C0190CC2AF622238D6DB182C98E44B30B610075C91C35147D77F1C8DA5C624E2B942FBDD258E3B5ACF8A584F012F5335B9613A5E33DDD3B506F74522D6E0F674642E13D806DE5F646E50BFBEE630268F1882FCDD93BC53395CA66FFDC5FB4CED3A2D5DC574045E12292CBC48B52D7B2F94B6FEB8FAB4FDBAED4FC1F05503E15EBE25C48EDD06B4B299CBA5AA6E0B0B6C675499742F132C4B90A75B6DF992C5161FC760CCFEA5E41313B92B328D2099CBFBDC66B9BD3506D2481CBC51F9F474FCBD7E1FE6ECDF67EE97F91625609A1C4B807BF936E722A9F39EF567E418846B9972F0302B7C2943B8D5AE46BAEB49C131A092BE296420DDD83E429A090433F732641B78496E38C5EF61C5E25DB5758F839CBF8843DAFD29672BCD52536234FEEE2F2475FF215FFF0F2C133B44750E0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201904130303264_addRecord'
BEGIN
    CREATE TABLE [dbo].[ApiInvokeRecords] (
        [Id] [int] NOT NULL IDENTITY,
        [Path] [nvarchar](200),
        [CreateOn] [datetime] NOT NULL,
        [CreateBy] [nvarchar](50),
        CONSTRAINT [PK_dbo.ApiInvokeRecords] PRIMARY KEY ([Id])
    )
    ALTER TABLE [dbo].[EntryForms] ADD [CreateOn] [datetime] NOT NULL DEFAULT '1900-01-01T00:00:00.000'
    ALTER TABLE [dbo].[EntryForms] ADD [CreateBy] [nvarchar](50)
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201904130303264_addRecord', N'yingbinAvenueWeb.Migrations.Configuration',  0x1F8B0800000000000400ED58DB8EDB36107D2FD07F10F4BCB1D6BB58A035E4045E3B2E8C662F583929FA4849639B28452A2465D808FA657DE827F5173AB4AEA67CC7B628D2C02F163573E6CAB9E8AF3FFEF4DFAD12E62C412A2A78DFED76AE5D07782462CAE77D37D3B3373FB8EFDE7EFF9DFF3E4E56CEA792EED6D02127577D77A175DAF33C152D2021AA93D0480A2566BA1389C423B1F06EAEAF7FF4BA5D0F10C2452CC7F15F32AE69029B077C1C0A1E41AA33C21E440C4C15E7F826D8A03A8F2401959208FAEE1A350B291F2C8167F00B849D9CC575068C1254270036731DC2B9D044A3B2BD8F0A022D059F07291E10365DA7807433C2141446F46AF253EDB9BE31F67835630915654A8BE44CC0EE6DE120CF66BFC8CD6EE54074E17B74B55E1BAB376EECBB83944EF852FC062F100919BB8E2DB33764D2D0EF7576C782B8726CC2AB2A5730A5CCEFCA19664C6712FA1C322D09BB729EB390D1E867584F1188F779C6585371541DDF6D1DE0D1B3142948BD7E815961CE042DF0B6F93C9BB1626BF0E4164EB8BEBD719D47144E4206555E34BC116821E127E0208986F899680D921B0CD878B625DD92850C8B521A26223ACA751EC8EA03F0B95EF45D0C9BEB8CE90AE2F2A4D0E023A7780F9149CB0C8E09194A40E59E782968844F53BC613B2C3B05E87E7D40E3BBF315F6BD3A0B0FE6261EC8F558C8E492ACAC98BFE5E30159580FA5F97730275F21251F44489F17821F12D4BDFBBFE73EB63E4D28C6B2D0E1D730CFD95168DEC04AEFB80818C1E22EA842E0B6593972007A77C1C75E596B94374CBBA0B73C654356576D1758E312EF72446572DDE6BDBCCF97F380B76720F01F489A62481A034271E204F974307C139CDF31931CC38BD48EC659695B49C2EB47E660BD45D1A8E9984AA531FF48484C560CE3A445D60EF01E4F97F2F6C4D02E4475144A46F33F673EB18DDB98B57BC7687182E565633C542AB6678916C26686238CC81D156F285896F07D55F31077DE539BFCF9C9E90875D168A2D4A7E72299AAD146BA6F55E33CBF2DB7DAB1F45AC1B4FA899D2427A550E3CEBE46F2D4B7FCFCB439C0FBCF244CDDF49A18F5E9E9488DB6D6846A1C7F4BC276A9B7492AE955C9B74ABB5F94D9E30B61ABEEE624AE832E5AD2D8D4DC60AD34241D43D0093EB321A3686F4DF040389D81D2F9DC87D34FF7C65A27FF3BAB9DA754CCCEDBEFFEF519961AE71E9D52CF1CCE9A6B145F12192D886C2F5235E82593638C4FFA3526C79D0ADE1DD1EF8225E9EB08ADBD91EC09EFB9D16D2D20356E6BA49EF018567DF78B335138CA7FCEA0E74C5184F37B6B5DF97A33CC5E45DA03ED596BC6295B465EAAD12DA140C372B5DBDBCAA9BBC8E1556497ACE61A73E1AAD2EE53BED7FCBCE98F40D1790D613E7672884CD6D5A025CD84CF44197834B0A95149622739688249450652D3198934BE8E40A9CDDEFA89B0CC189984104FF853A6D34C0F948224645B2381EF1D96BFD9C7B675F69F52F3A45EC3045493C69B5B729F5116577A8FDBF7621F8449D5A220A156B8B723DC7C5D213DB6E6B27D4085FB46900237E56C0A49CA104C3DF1802CE112DDB0BA7D803989D6E5B8B11FE47820B6DDEE8F28994B92A802A3E6379FEC3DF3CDFEEDDF91D07F4AE5170000 , N'6.2.0-61023')
END

